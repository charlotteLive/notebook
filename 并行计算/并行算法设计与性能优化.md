# 并行算法设计与性能优化

## 1. 基础概念

**并行**对应的英文单词是parallelism，是指在具有多个处理单元的系统上，通过将计算或数据划分为多个部分，将各个部分分配到不同的处理单元上，各处理单元相互协作，同时运行，以达到加快求解速度或者提高求解问题规模的目的。

**并发**对应的英文单词是concurrency，并发是指在一个处理单元上运行多个应用，各应用分时占用处理单元，是一种微观上串行、宏观上并行的模式，有时也称其为时间上串行、空间上并行。

**代码性能优化**是指通过调整源代码，使得其生成的机器指令能够更高效地执行，通常高效是指执行时间更少、使用的存储器更少或能够计算更大规模的问题。

一般来说，**并发是为了满足应用的功能需求**，比如在计算的同时，用户界面能够响应用户；一个运行在16核处理器上的网络服务器需要同时支持64个用户而开启了64个线程。而**并行更多的是为了提高速度或为了解决更大规模的问题**。

**向量化是指使用同一条指令同时操作多个数据；多核技术是采用在同一个芯片上集成多个核心的办法。**并行和向量化的首要作用是尽量发挥硬件提供的全部计算能力，以减少延迟（更快地完成计算任务）或提高吞吐量（在相同的时间内完成更多任务）。标量串行软件只能利用多核向量处理器提供的部分计算能力，为了利用多核向量处理器提供的全部计算能力，必须采用向量化和并行化的思维方式编写软件代码，而现有的串行软件必须修改才能利用多核向量处理器的全部计算能力。

## 2. 串行代码优化

串行代码性能优化与并行代码优化同等重要，甚至更重要：一方面因为并行单独获得的加速通常有限（一般不大于处理器核心的数目），而串行代码优化有时能获得成千上万倍的加速；另一方面因为单个并行控制流的内部依旧是串行的，在这种情况下，一些串行优化措施依旧有效。

### 2.1 系统级别优化

